(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{106:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(17),c=r.n(a),s=r(9),o=r(33),i=r(61),l=r(60),d=r(35),j=Object(o.combineReducers)({productList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{products:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRODUCT_LIST_REQUEST":return{loading:!0,products:[]};case"PRODUCT_LIST_SUCCESS":return{loading:!1,products:t.payload};case"PRODUCT_LIST_FAIL":return{loading:!1,error:t.payload};default:return e}},productDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{product:{reviews:[]}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRODUCT_DETAILS_REQUEST":return Object(d.a)({loading:!0},e);case"PRODUCT_DETAILS_SUCCESS":return{loading:!1,product:t.payload};case"PRODUCT_DETAILS_FAIL":return{loading:!1,error:t.payload};default:return e}},userLogin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOGIN_REQUEST":return{loading:!0};case"USER_LOGIN_SUCCESS":return{loading:!1,userInfo:t.payload};case"USER_LOGIN_FAIL":return{loading:!1,error:t.payload};case"USER_LOGOUT":return{};default:return e}},userRegister:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_REGISTER_REQUEST":return{loading:!0};case"USER_REGISTER_SUCCESS":return{loading:!1,userInfo:t.payload};case"USER_REGISTER_FAIL":return{loading:!1,error:t.payload};case"USER_LOGOUT":return{};default:return e}}}),u={userLogin:{userInfo:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):null}},p=[i.a],O=Object(o.createStore)(j,u,Object(l.composeWithDevTools)(o.applyMiddleware.apply(void 0,p))),b=(r(74),r(75),r(15)),h=r(7),x=r(111),f=r(36),S=r(115),m=r(118),g=r(114),v=r(30),E=r(20),I=r.n(E),y=r(27),C=r.n(y),L=r(2);var R=function(){var e=Object(s.c)((function(e){return e.userLogin})).userInfo,t=Object(s.b)();return Object(L.jsx)("header",{children:Object(L.jsx)(S.a,{bg:"dark",variant:"dark",expand:"lg",collapseOnSelect:!0,children:Object(L.jsxs)(x.a,{children:[Object(L.jsx)(f.LinkContainer,{to:"/",children:Object(L.jsx)(S.a.Brand,{children:"ProShop"})}),Object(L.jsx)(S.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(L.jsx)(S.a.Collapse,{id:"basic-navbar-nav",children:Object(L.jsxs)(m.a,{className:"ml-auto",children:[e?Object(L.jsxs)(g.a,{title:e.name,id:"username",children:[Object(L.jsx)(f.LinkContainer,{to:"/profile",children:Object(L.jsx)(g.a.Item,{children:"Profile"})}),Object(L.jsx)(g.a.Item,{onClick:function(){t((function(e){localStorage.removeItem("userInfo"),e({type:"USER_LOGOUT"})}))},children:"Logout"})]}):Object(L.jsx)(f.LinkContainer,{to:"/login",children:Object(L.jsxs)(m.a.Link,{children:[Object(L.jsx)("i",{className:"fas fa-user"}),"Login"]})}),Object(L.jsx)(f.LinkContainer,{to:"/cart",children:Object(L.jsx)(m.a.Link,{children:"Cart"})})]})})]})})})},_=r(112),T=r(66);var U=function(){return Object(L.jsx)("footer",{children:Object(L.jsx)(x.a,{children:Object(L.jsx)(_.a,{children:Object(L.jsx)(T.a,{className:"text-center py-3",children:"Copyright ProShop"})})})})},w=r(117);var k=function(e){var t=e.product;return Object(L.jsxs)(w.a,{className:"my-3 p-3 rounded",children:[Object(L.jsx)(b.Link,{to:"/product/".concat(t._id),children:Object(L.jsx)(w.a.Img,{src:t.image})}),Object(L.jsxs)(w.a.Body,{children:[Object(L.jsx)(b.Link,{to:"/product/".concat(t._id),children:Object(L.jsx)(w.a.Title,{as:"div",children:Object(L.jsx)("strong",{children:t.name})})}),Object(L.jsx)(w.a.Text,{as:"div",children:Object(L.jsxs)("div",{className:"my-3",children:[t.rating," from ",t.numReviews," reviews"]})}),Object(L.jsxs)(w.a.Text,{as:"h3",children:["$",t.price]})]})]})};var D=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.productList})),r=t.error,a=t.loading,c=t.products;Object(n.useEffect)((function(){e(function(){var e=Object(v.a)(I.a.mark((function e(t){var r,n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"PRODUCT_LIST_REQUEST"}),e.next=4,C.a.get("http://127.0.0.1:8000/api/products");case 4:r=e.sent,n=r.data,t({type:"PRODUCT_LIST_SUCCESS",payload:n}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:"PRODUCT_LIST_FAIL",payload:e.t0.response&&e.t0.response.data.detail?e.t0.response.data.detail:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())}),[e]);var o=Object(L.jsx)(_.a,{children:c.map((function(e){return Object(L.jsx)(T.a,{sm:12,md:6,lg:4,xl:3,children:Object(L.jsx)(k,{product:e})},e._id)}))});return Object(L.jsxs)("div",{children:[Object(L.jsx)("h1",{children:"Latest Product"}),a?Object(L.jsx)("h2",{children:"Loading..."}):r?Object(L.jsx)("h3",{children:r}):o]})},P=r(113),G=r(119),N=r(65);var A=function(e){var t=e.match,r=Object(s.b)(),a=Object(s.c)((function(e){return e.productDetails})),c=(a.loading,a.error,a.product);return Object(n.useEffect)((function(){var e;r((e=t.params.id,function(){var t=Object(v.a)(I.a.mark((function t(r){var n,a;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:"PRODUCT_DETAILS_REQUEST"}),t.next=4,C.a.get("http://127.0.0.1:8000/api/product/".concat(e));case 4:n=t.sent,a=n.data,r({type:"PRODUCT_DETAILS_SUCCESS",payload:a}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),r({type:"PRODUCT_DETAILS_FAIL",payload:t.t0.response&&t.t0.response.data.detail?t.t0.response.data.detail:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()))}),[r]),Object(L.jsxs)("div",{children:[Object(L.jsx)(b.Link,{to:"/",className:"btn btn-primary my-3",children:"Go Back"}),Object(L.jsxs)(_.a,{children:[Object(L.jsx)(T.a,{md:6,children:Object(L.jsx)(P.a,{src:c.image,alt:c.name,fluid:!0})}),Object(L.jsx)(T.a,{md:3,children:Object(L.jsxs)(G.a,{variant:"flush",children:[Object(L.jsx)(G.a.Item,{children:Object(L.jsx)("h3",{children:c.name})}),Object(L.jsxs)(G.a.Item,{children:[c.rating," from ",c.numReviews," reviews"]}),Object(L.jsxs)(G.a.Item,{children:["Price: $",c.price]})]})}),Object(L.jsx)(T.a,{md:3,children:Object(L.jsxs)(G.a,{variant:"flush",children:[Object(L.jsx)(G.a.Item,{children:Object(L.jsx)("h3",{children:c.price})}),Object(L.jsxs)(G.a.Item,{children:["Status: ",c.countInStock>0?"Instock":"Out Of Stock"]}),Object(L.jsx)(G.a.Item,{children:Object(L.jsx)("div",{className:"d-grid gap-2",children:Object(L.jsx)(N.a,{variant:"primary",size:"md",disabled:0==c.countInStock,children:"ADD TO CART"})})})]})})]})]})},F=r(22),Q=r(116);var B=function(e){var t=e.children;return Object(L.jsx)(x.a,{children:Object(L.jsx)(_.a,{className:"justify-content-md-center",children:Object(L.jsx)(T.a,{xs:12,md:6,children:t})})})};var J=function(e){var t=e.location,r=e.history,a=Object(n.useState)(""),c=Object(F.a)(a,2),o=c[0],i=c[1],l=Object(n.useState)(""),d=Object(F.a)(l,2),j=d[0],u=d[1],p=Object(s.b)(),O=t.search?t.search.split("=")[1]:"/",h=Object(s.c)((function(e){return e.userLogin})),x=(h.error,h.loading,h.userInfo);return Object(n.useEffect)((function(){x&&r.push(O)}),[r,x,O]),Object(L.jsxs)(B,{children:[Object(L.jsx)("h1",{children:"Sign In"}),Object(L.jsxs)(Q.a,{onSubmit:function(e){e.preventDefault(),p(function(e,t){return function(){var r=Object(v.a)(I.a.mark((function r(n){var a,c,s;return I.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n({type:"USER_LOGIN_REQUEST"}),a={headers:{"Content-type":"application/json"}},r.next=5,C.a.post("http://localhost:8000/api/users/login",{username:e,password:t},a);case 5:c=r.sent,s=c.data,n({type:"USER_LOGIN_SUCCESS",payload:s}),localStorage.setItem("userInfo",JSON.stringify(s)),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),n({type:"USER_LOGIN_FAIL",payload:r.t0.response&&r.t0.response.data.detail?r.t0.response.data.detail:r.t0.message});case 14:case"end":return r.stop()}}),r,null,[[0,11]])})));return function(e){return r.apply(this,arguments)}}()}(o,j))},children:[Object(L.jsxs)(Q.a.Group,{controlId:"email",children:[Object(L.jsx)(Q.a.Label,{children:"Email Address"}),Object(L.jsx)(Q.a.Control,{type:"email",placeholder:"Enter Email",value:o,onChange:function(e){return i(e.target.value)}})]}),Object(L.jsxs)(Q.a.Group,{controlId:"password",children:[Object(L.jsx)(Q.a.Label,{children:"Password"}),Object(L.jsx)(Q.a.Control,{type:"password",placeholder:"Enter Password",value:j,onChange:function(e){return u(e.target.value)}})]}),Object(L.jsx)(N.a,{type:"submit",variant:"primary",children:"Sign In"})]}),Object(L.jsx)(_.a,{className:"py-3",children:Object(L.jsxs)(T.a,{children:["New Customer?"," ",Object(L.jsx)(b.Link,{to:O?"/register?redirect=".concat(O):"/register",children:"Register"})]})})]})};var q=function(e){var t=e.location,r=e.history,a=Object(n.useState)(""),c=Object(F.a)(a,2),o=c[0],i=c[1],l=Object(n.useState)(""),d=Object(F.a)(l,2),j=d[0],u=d[1],p=Object(n.useState)(""),O=Object(F.a)(p,2),h=O[0],x=O[1],f=Object(n.useState)(""),S=Object(F.a)(f,2),m=S[0],g=S[1],E=Object(n.useState)(""),y=Object(F.a)(E,2),R=y[0],U=y[1],w=Object(s.b)(),k=t.search?t.search.split("=")[1]:"/",D=Object(s.c)((function(e){return e.userRegister})),P=D.error,G=(D.loading,D.userInfo);return Object(n.useEffect)((function(){G&&r.push(k)}),[r,G,k]),Object(L.jsxs)(B,{children:[Object(L.jsx)("h1",{children:"Sign In"}),R&&Object(L.jsx)("h3",{children:R}),P&&Object(L.jsx)("h3",{children:P}),Object(L.jsxs)(Q.a,{onSubmit:function(e){e.preventDefault(),h!=m?U("Passwords do not match"):w(function(e,t,r){return function(){var n=Object(v.a)(I.a.mark((function n(a){var c,s,o;return I.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a({type:"USER_REGISTER_REQUEST"}),c={headers:{"Content-type":"application/json"}},n.next=5,C.a.post("http://localhost:8000/api/users/register",{name:e,email:t,password:r},c);case 5:s=n.sent,o=s.data,a({type:"USER_REGISTER_SUCCESS",payload:o}),a({type:"USER_LOGIN_SUCCESS",payload:o}),localStorage.setItem("userInfo",JSON.stringify(o)),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),a({type:"USER_REGISTER_FAIL",payload:n.t0.response&&n.t0.response.data.detail?n.t0.response.data.detail:n.t0.message});case 15:case"end":return n.stop()}}),n,null,[[0,12]])})));return function(e){return n.apply(this,arguments)}}()}(o,j,h))},children:[Object(L.jsxs)(Q.a.Group,{controlId:"name",children:[Object(L.jsx)(Q.a.Label,{children:"Name"}),Object(L.jsx)(Q.a.Control,{required:!0,type:"name",placeholder:"Enter name",value:o,onChange:function(e){return i(e.target.value)}})]}),Object(L.jsxs)(Q.a.Group,{controlId:"email",children:[Object(L.jsx)(Q.a.Label,{children:"Email Address"}),Object(L.jsx)(Q.a.Control,{required:!0,type:"email",placeholder:"Enter Email",value:j,onChange:function(e){return u(e.target.value)}})]}),Object(L.jsxs)(Q.a.Group,{controlId:"password",children:[Object(L.jsx)(Q.a.Label,{children:"Password"}),Object(L.jsx)(Q.a.Control,{required:!0,type:"password",placeholder:"Enter Password",value:h,onChange:function(e){return x(e.target.value)}})]}),Object(L.jsxs)(Q.a.Group,{controlId:"passwordConfirm",children:[Object(L.jsx)(Q.a.Label,{children:"Confirm Password"}),Object(L.jsx)(Q.a.Control,{required:!0,type:"password",placeholder:"Confirm Password",value:m,onChange:function(e){return g(e.target.value)}})]}),Object(L.jsx)(N.a,{type:"submit",variant:"primary",children:"Register"})]}),Object(L.jsx)(_.a,{className:"py-3",children:Object(L.jsxs)(T.a,{children:["Have an Account?"," ",Object(L.jsx)(b.Link,{to:k?"/login?redirect=".concat(k):"/login",children:"Sign In"})]})})]})};var $=function(){return Object(L.jsxs)(b.BrowserRouter,{children:[Object(L.jsx)(R,{}),Object(L.jsx)("main",{className:"py-3",children:Object(L.jsxs)(x.a,{children:[Object(L.jsx)(h.d,{path:"/",component:D,exact:!0}),Object(L.jsx)(h.d,{path:"/login",component:J}),Object(L.jsx)(h.d,{path:"/product/:id",component:A}),Object(L.jsx)(h.d,{path:"/register",component:q})]})}),Object(L.jsx)(U,{})]})},z=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,120)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),n(e),a(e),c(e),s(e)}))};c.a.render(Object(L.jsx)(s.a,{store:O,children:Object(L.jsx)($,{})}),document.getElementById("root")),z()},74:function(e,t,r){},75:function(e,t,r){}},[[106,1,2]]]);
//# sourceMappingURL=main.006d47bb.chunk.js.map